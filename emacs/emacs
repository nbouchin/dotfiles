;;; PACKAGE-ARCHIVES --- Summary.
;;; Commentary:
(require 'package)

(add-to-list 'package-archives '("gnu" . "https://elpa.gnu.org/packages/") t)
(add-to-list 'package-archives '("melpa" . "https://melpa.milkbox.net/packages/") t)

;;; Code:
(package-initialize)

;; Run emacs as a server.
(server-mode 1)
;;; MY FUNCTION DECLARATIONS

;; Install all packages.
(defun my-install ()
  "My-install searchg all packages in package-list and install them if not installed."
  (interactive)
  (defvar package-list)
  (setq package-list '(irony-eldoc flycheck-irony irony company-quickhelp company-c-headers company magit dired-sidebar iedit helm monokai-theme yasnippet-snippets yasnippet flycheck))
  ;; fetch the list of packages available.
  (unless package-archive-contents
	(package-refresh-contents))
  ;; install the missing packages.
  (dolist (package package-list)
	(unless (package-installed-p package)
	  (package-install package)))
  )

;; Byte compile config.
(defun my-recompile ()
  "My-recompile byte-compile all configuration."
  (interactive)
  (byte-recompile-directory (expand-file-name "~/.emacs.d") 0))

;;; EMACS MISCS.

;; Set default shell
(setq-default shell-file-name "/bin/bash")
;; Set emacs swap directory.
(setq backup-directory-alist `(("." . "~/.emacs.d/saves")))
;; Change emacs default theme
(load-theme 'monokai t nil)
;; Enable dired-sidebar.
(require 'dired-sidebar)
(global-set-key (kbd "C-x d") 'dired-sidebar-show-sidebar)
;; Padding configuration.
(tool-bar-mode -1)
(set-language-environment "UTF-8")
(setq-default font-lock-global-modes t)
(setq-default tab-width 4)
(setq-default indent-tabs-mode t)
(setq-default c-backspace-function 'backward-delete-char)
(setq-default c-basic-offset 4)
(setq-default c-default-style "linux")
(setq-default tab-stop-list '(4 8 12 16 20 24 28 32 36 40 44 48 52 56 60
								64 68 72 76 80 84 88 92 96 100 104 108 112 116 120))
;; Enable line numbers
(defvar linum-format)
(global-linum-mode 1)
(setq linum-format "%d "); Set plus bar.

;;; PLUGIN CONFIGURATION

;; Enable ace-jump-mode.
(require 'ace-jump-mode)
(define-key global-map (kbd "C-c SPC") 'ace-jump-mode)
;; Enable ede mode
(global-ede-mode 1)
;; Enable flycheck on any files.
(require 'flycheck)
(global-flycheck-mode)
(setq flycheck-check-syntax-automatically '(save mode-enabe))
;; Start undo-tree wuth emacs.
(global-undo-tree-mode)

;; Enable Company on any files.
(require 'company)
(require 'company-c-headers)
(defvar company-backends)
(defvar company-quickhelp-frontend)
(defvar company-idle-delay)
(defvar company-quickhelp-delay)

(add-hook 'after-init-hook 'global-company-mode)
(company-quickhelp-mode); ctrl-h for company-help.
(setq company-idle-delay 0); remove company delay.
(setq company-quickhelp-delay 0); remove company delay.

(add-to-list 'company-c-headers-path-system "/usr/include")
(add-to-list 'company-backends '(company-irony-c-headers company-dabbrev-code company-yasnippet company-c-headers company-irony company-files company-semantic))
(define-key company-active-map (kbd "C-c h") #'company-quickhelp-manual-begin)
;; Enable semantic
(semantic-mode 1)

;; Enable yasnippet.
(require 'yasnippet)
(yas-global-mode 1)
;; Enable iedit
(define-key global-map (kbd "C-c ;") 'iedit-mode)
(define-key global-map (kbd "C-c g") 'magit-status)

(provide 'emacs)
;;; .emacs ends here
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(package-selected-packages
   (quote
	(irony-eldoc flycheck-irony irony company-quickhelp company-c-headers company magit dired-sidebar auto-complete iedit helm monokai-theme yasnippet-snippets yasnippet flycheck))))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 )
