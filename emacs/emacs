;;; PACKAGE-ARCHIVES --- Summary.
;;; Commentary:
(require 'package)

(add-to-list 'package-archives '("gnu" . "https://elpa.gnu.org/packages/") t)
(add-to-list 'package-archives '("melpa" . "https://melpa.milkbox.net/packages/") t)

;;; Code:
(package-initialize)

;; Install all packages.
(defun my-install ()
  "My-install searchg all packages in package-list and install them if not installed."
  (interactive)
  (defvar package-list)
  (setq package-list '(autopair git-gutter-fringe auto-complete auto-complete-c-headers auto-complete-clang magit dired-sidebar iedit helm monokai-theme yasnippet-snippets yasnippet flycheck ace-jump-mode undo-tree))
  ;; fetch the list of packages available.
  (unless package-archive-contents
	(package-refresh-contents))
  ;; install the missing packages.
  (dolist (package package-list)
	(unless (package-installed-p package)
	  (package-install package)))
  )

(server-start); Run emacs as a server.

;; Byte compile config.
(defun my-recompile ()
  "My-recompile byte-compile all configuration."
  (interactive)
  (byte-recompile-directory (expand-file-name "~/.emacs.d") 0))

(defun reload-dotemacs-file ()
  "Reload .emacs file without restarting Emacs."
  (interactive)
  (load-file "~/.emacs"))

(setq-default shell-file-name "/bin/bash"); Set default shell
(setq backup-directory-alist `(("." . "~/.emacs.d/saves"))); Set emacs swap directory.
(load-theme 'monokai t nil); Change emacs default theme

(require 'dired-sidebar); Enable dired-sidebar.
(global-set-key (kbd "C-x d") 'dired-sidebar-toggle-sidebar)
(tool-bar-mode -1); Padding configuration.
(global-hl-line-mode 1)
(set-language-environment "UTF-8")
(setq ring-bell-function 'ignore)
(setq-default font-lock-global-modes t)
(setq-default tab-width 4)
(setq-default indent-tabs-mode t)
(setq-default c-backspace-function 'backward-delete-char)
(setq-default c-basic-offset 4)
(setq-default c-default-style "linux")
(setq-default tab-stop-list '(4 8 12 16 20 24 28 32 36 40 44 48 52 56 60
								64 68 72 76 80 84 88 92 96 100 104 108 112 116 120))

(require 'autopair)
(autopair-global-mode 1)
(defvar linum-format); Enable line numbers
(global-linum-mode 1)
(add-hook 'term-mode-hook (lambda () (linum-mode -1)))
(add-hook 'dired-mode-hook (lambda () (linum-mode -1)))
(setq linum-format "%d "); Set plus bar.
(require 'git-gutter-fringe); Enable git-gutter-fringe
(global-git-gutter-mode t); Start git-gutter-fringe with emacs
(setq git-gutter-fr:side 'right-fringe); Set fringe to right

(require 'ace-jump-mode); Enable ace-jump-mode.
(define-key global-map (kbd "C-c SPC") 'ace-jump-mode)
(define-key global-map (kbd "C-c g") 'magit-status)

(global-ede-mode 1); Enable ede mode

(require 'flycheck); Enable flycheck on any files.
(global-flycheck-mode)
(setq flycheck-check-syntax-automatically '(save mode-enabe))

(global-undo-tree-mode); Start undo-tree with emacs.

(require 'yasnippet); start yasnippet with emacs
(yas-global-mode 1)

(require 'auto-complete)
(require 'auto-complete-config)

(defvar achead:include-directories)

(ac-config-default)
(setq ac-auto-show-menu t)
(defun my:ac-c-header-init ()
  "Initialize auto-complete-c-headers."
  (require 'auto-complete-c-headers)
  (add-to-list 'ac-sources 'ac-source-c-headers)
  (add-to-list 'achead:include-directories '"/usr/include")
  )
;; add c-header in hook.
(add-hook 'c++-mode-hook 'my:ac-c-header-init)
(add-hook 'c-mode-hook 'my:ac-c-header-init)
(define-key global-map (kbd "C-c ;") 'iedit-mode)

(semantic-mode 1); turn on Semantic
(defun my:add-semantic-to-autocomplete()
  "'add-to-list' into ac-sources the ac-source-semantic plugin."
  (add-to-list 'ac-sources 'ac-source-semantic)
  )
(add-hook 'c-mode-common-hook 'my:add-semantic-to-autocomplete)
(global-semantic-idle-scheduler-mode 1)

(provide 'emacs)
;;; .emacs ends here
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(package-selected-packages
   (quote
	(autopair git-gutter-fringe auto-complete-clang auto-complete-c-headers magit dired-sidebar auto-complete iedit helm monokai-theme yasnippet-snippets yasnippet flycheck))))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 )
