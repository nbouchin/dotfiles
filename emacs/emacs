;;; PACKAGE-ARCHIVES --- Summary.
(require 'package)

(setq package-list '(monokai-theme yasnippet-snippets yaml-mode undo-tree pyflakes markdown-preview-mode markdown-preview-eww helm-swoop git-gutter git flycheck elpy dired-hide-dotfiles company-quickhelp company-jedi))

;;; Commentary:
(add-to-list 'package-archives '("gnu" . "https://elpa.gnu.org/packages/") t)
(add-to-list 'package-archives '("melpa" . "https://melpa.milkbox.net/packages/") t)
(add-to-list 'package-archives '("marmalade" . "https://marmalade-repo.org/packages/") t)

;;; Code:
(package-initialize)

;;(custom-set-faces
;; ;; custom-set-faces was added by Custom.
;; ;; If you edit it by hand, you could mess it up, so be careful.
;; ;; Your init file should contain only one such instance.
;; ;; If there is more than one, they won't work right.
;; '(default ((t (:background "dark")))))

; fetch the list of packages available 
(unless package-archive-contents
  (package-refresh-contents))

; install the missing packages
(dolist (package package-list)
  (unless (package-installed-p package)
    (package-install package)))

;; Run emacs as a server
(server-start)

;; Set colorscheme.
(load-theme 'monokai t nil)

;; Enable mouse support.
(xterm-mouse-mode 1)

;; Padding configuration

(set-language-environment "UTF-8")
(setq-default font-lock-global-modes t)
(setq-default tab-width 4)
(setq-default indent-tabs-mode t)
(setq-default c-backspace-function 'backward-delete-char)
(setq-default c-basic-offset 4)
(setq-default c-default-style "linux")
(setq-default tab-stop-list '(4 8 12 16 20 24 28 32 36 40 44 48 52 56 60
								64 68 72 76 80 84 88 92 96 100 104 108 112 116 120))

;; Set emacs swap files.
(setq backup-directory-alist `(("." . "~/.emacs.d/saves")))

;; Enable emacs flycheck.
(global-flycheck-mode)

;; Enable nlinum mode.
(defvar linum-format)

(global-linum-mode 1)
(setq  linum-format "%d "); Set plus bar.

;; Enable git-gutter.
(global-git-gutter-mode)

;; Enable undo-dir mode.
(defvar undo-tree-auto-save-history)
(defvar undo-tree-history-directory-alist)

(global-undo-tree-mode)
(setq undo-tree-auto-save-history t)
(setq undo-tree-history-directory-alist '(("." . "~/.emacs.d/undo")))

;; Company mode configuration.
(defvar company-backends)
(defvar company-quickhelp-frontend)
(defvar company-idle-delay)

(add-hook 'after-init-hook 'global-company-mode)
(company-quickhelp-mode 0); ctrl-h for company-help.
(setq company-idle-delay 0); remove company delay.

(defun my/python-mode-hook () "Load python jedi."
       (add-to-list 'company-backends 'company-jedi)); use of jedi for company completion.

(add-hook 'python-mode-hook 'my/python-mode-hook)
(add-hook 'python-mode-hook 'run-python-internal)

;; Use ipython execution
(defvar python-shell-interpreter)
(defvar python-shell-interpreter-args)

(require 'elpy)
(elpy-enable)

;; Load and enable yasnippets.
(require 'yasnippet)
(yas-global-mode 1)

;; Set window navigations in emacs.
(global-set-key [M-left] 'windmove-left)          ; move to left window
(global-set-key [M-right] 'windmove-right)        ; move to right window
(global-set-key [M-up] 'windmove-up)              ; move to upper window
(global-set-key [M-down] 'windmove-down)          ; move to lower window

;; Byte compile config.
(defun my-recompile ()
  "My-recompile byte-compile all configuration."
  (interactive)
  (byte-recompile-directory (expand-file-name "~/.emacs.d") 0))

(provide 'emacs)
;;; .emacs ends here
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 )
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(custom-safe-themes
   (quote
	("c3d4af771cbe0501d5a865656802788a9a0ff9cf10a7df704ec8b8ef69017c68" "0e5fa1ee4b38ba8fd761936bbed55f5b4343863b2d4100fd58ffb9c9becb44bb" "41f90b83fae6e57d37617a9998424cb78fa064fc79706442e677201084ee181d" "e11569fd7e31321a33358ee4b232c2d3cf05caccd90f896e1df6cab228191109" default)))
 '(package-selected-packages
   (quote
	(transpose-frame monokai-theme yasnippet-snippets yaml-mode undo-tree pyflakes markdown-preview-mode markdown-preview-eww helm-swoop git-gutter git flycheck elpy dired-hide-dotfiles company-quickhelp company-jedi))))
